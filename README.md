# Инструкции для подключения Workflow

## Workflow файл

Для подключения workflow необходимо скопировать директорию `.github` в корень вашего репозитория (Можно запушить сразу в `master`/`main`).  
Теперь после каждого пуша в pull request (пуш в ветку, на которой открыт pull request) будут запускаться проверки, которые включают:  
- Сборка Gradle проекта
- Запуск тестов
- Проверка покрытия кода тестами (должно быть больше 80%, отчёт будет прикреплён как комментарий в pull request)
- Генерация javadoc и публикация их в ветку `gh-pages`
- Проверка кода на соответствие Google Java Style (замечания будут отображаться во вкладке `Files changed`)

ВАЖНО: при открытии pull request его имя должно совпадать с именем папки, в которой находится код вашей лабораторной, например, `Task_1_1_1` для лабораторной в первом семестре, из первого раздела номер один.  

## Настройки репозитория

Для того, чтобы у вас был доступ к опубликованной документации лабораторных, необходимо зайти в `Settings > Pages` и в секции `Build and deployment` выбрать следующие параметры  
![image](https://user-images.githubusercontent.com/34095512/188311837-7168faff-b67b-4a58-afeb-1ba15552f658.png)

После этого вы сможете открывать вашу документацию по адресу `https://<Github username>.github.io/OOP/<Lab name>/`

## Настройка `build.gradle`

Для составления отчётов по покрытию тестами вашего кода, необходимо подключить в ваш gradle скрипт плагин `jacoco`. Для этого:
- Добавьте строчку `id 'jacoco'` в плагины
```Groovy
plugins {
    id 'java'
    id 'jacoco'
}
```
- Измените задачу `jacocoTestReport`, чтобы она генерировала отчёт в формате `.xml`, а не только `.html` (достаточно скопировать код в конец вашего `build.gradle`)
```Groovy
jacocoTestReport {
    reports {
        xml.required = true
    }
}
```
